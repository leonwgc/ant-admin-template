# å…¨å±€æœç´¢åŠŸèƒ½

æœ¬é¡¹ç›®å·²é›†æˆå…¨å±€æœç´¢åŠŸèƒ½ï¼ŒåŸºäº **Fuse.js** (æ¨¡ç³Šæœç´¢) å’Œ **cmdk** (å‘½ä»¤é¢æ¿UI) å®ç°ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ” **æ¨¡ç³Šæœç´¢**: æ”¯æŒèœå•åç§°ã€è·¯ç”±è·¯å¾„çš„æ¨¡ç³ŠåŒ¹é…
- âŒ¨ï¸ **å¿«æ·é”®**: `Cmd+K` (Mac) / `Ctrl+K` (Windows/Linux) å¿«é€Ÿå”¤èµ·
- ğŸ¨ **ç°ä»£åŒ– UI**: å‚è€ƒ VSCode å‘½ä»¤é¢æ¿è®¾è®¡
- ğŸŒ **å›½é™…åŒ–**: æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢
- ğŸ” **æƒé™è¿‡æ»¤**: è‡ªåŠ¨æ ¹æ®ç”¨æˆ·æƒé™è¿‡æ»¤èœå•é¡¹
- ğŸ“± **å“åº”å¼**: æ”¯æŒæš—è‰²ä¸»é¢˜
- âš¡ **é«˜æ€§èƒ½**: åŸºäº Fuse.js é«˜æ•ˆæœç´¢ç®—æ³•

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### 1. å¿«æ·é”®å”¤èµ·
æŒ‰ä¸‹ `Cmd+K` (Mac) æˆ– `Ctrl+K` (Windows/Linux)

### 2. ç‚¹å‡»æœç´¢æŒ‰é’®
ç‚¹å‡»é¡¶éƒ¨å¯¼èˆªæ çš„æœç´¢å›¾æ ‡ ğŸ”

### 3. æœç´¢æ“ä½œ
- è¾“å…¥å…³é”®è¯è¿›è¡Œæ¨¡ç³Šæœç´¢
- ä½¿ç”¨ `â†‘â†“` æ–¹å‘é”®åˆ‡æ¢é€‰é¡¹
- æŒ‰ `Enter` è·³è½¬åˆ°é€‰ä¸­çš„èœå•
- æŒ‰ `ESC` å…³é—­æœç´¢æ¡†

## ğŸ“¦ æŠ€æœ¯æ ˆ

- **[Fuse.js](https://fusejs.io/)**: è½»é‡çº§æ¨¡ç³Šæœç´¢åº“
- **[cmdk](https://cmdk.paco.me/)**: å‘½ä»¤é¢æ¿ UI ç»„ä»¶
- **React Hook**: è‡ªå®šä¹‰ Hook å°è£…
- **TypeScript**: ç±»å‹å®‰å…¨

## ğŸ“ æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ GlobalSearch/
â”‚       â”œâ”€â”€ GlobalSearch.tsx        # å…¨å±€æœç´¢ç»„ä»¶
â”‚       â”œâ”€â”€ GlobalSearch.scss       # æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ index.ts                # å¯¼å‡ºæ–‡ä»¶
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ flattenMenus.ts             # èœå•æ‰å¹³åŒ–å·¥å…·
â”œâ”€â”€ layouts/
â”‚   â””â”€â”€ Header.tsx                  # é›†æˆæœç´¢å…¥å£
â””â”€â”€ locales/
    â””â”€â”€ common/
        â”œâ”€â”€ zh.ts                   # ä¸­æ–‡ç¿»è¯‘
        â””â”€â”€ en.ts                   # è‹±æ–‡ç¿»è¯‘
```

## ğŸ”§ é…ç½®è¯´æ˜

### æœç´¢é…ç½®

åœ¨ `GlobalSearch.tsx` ä¸­å¯ä»¥è°ƒæ•´ Fuse.js é…ç½®ï¼š

```typescript
const fuse = new Fuse(flatMenus, {
  keys: [
    { name: 'label', weight: 2 },  // èœå•åç§°æƒé‡æ›´é«˜
    { name: 'key', weight: 1 },
    { name: 'route', weight: 1 },
  ],
  threshold: 0.3,  // æ¨¡ç³Šåº¦ (0-1ï¼Œè¶Šå°è¶Šç²¾ç¡®)
  includeScore: true,
  minMatchCharLength: 1,
});
```

### è‡ªå®šä¹‰æ ·å¼

ä¿®æ”¹ `GlobalSearch.scss` æ–‡ä»¶è‡ªå®šä¹‰æœç´¢æ¡†æ ·å¼ã€‚

## ğŸ¨ æ ·å¼å®šåˆ¶

ç»„ä»¶æ”¯æŒæš—è‰²ä¸»é¢˜ï¼Œä¼šè‡ªåŠ¨æ ¹æ®ç³»ç»Ÿä¸»é¢˜åˆ‡æ¢æ ·å¼ã€‚å¦‚éœ€è‡ªå®šä¹‰ï¼š

```scss
// ä¿®æ”¹ä¸»è‰²è°ƒ
.global-search {
  &__item {
    &[data-selected='true'] {
      background: your-color;  // é€‰ä¸­é¡¹èƒŒæ™¯è‰²
    }
  }
}
```

## ğŸš€ æ‰©å±•åŠŸèƒ½

### æ·»åŠ æœ€è¿‘è®¿é—®è®°å½•

å¯ä»¥åœ¨ `GlobalSearch.tsx` ä¸­é›†æˆ localStorage è®°å½•æœ€è¿‘è®¿é—®çš„èœå•ï¼š

```typescript
// ä¿å­˜è®¿é—®è®°å½•
const handleSelect = (route: string) => {
  const recent = JSON.parse(localStorage.getItem('recentMenus') || '[]');
  localStorage.setItem('recentMenus', JSON.stringify([route, ...recent].slice(0, 10)));
  navTo(route);
};
```

### æ·»åŠ å…¶ä»–æœç´¢æº

é™¤äº†èœå•æœç´¢ï¼Œè¿˜å¯ä»¥æ·»åŠ ï¼š
- æœ€è¿‘è®¿é—®çš„é¡µé¢
- å¸¸ç”¨æ“ä½œ
- æ–‡æ¡£æœç´¢
- ç”¨æˆ·æœç´¢

## ğŸ“ API æ–‡æ¡£

### GlobalSearch Props

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| open | boolean | - | æ˜¯å¦æ‰“å¼€æœç´¢æ¡† |
| onOpenChange | (open: boolean) => void | - | æ‰“å¼€/å…³é—­å›è°ƒ |

### flattenMenus å‡½æ•°

```typescript
function flattenMenus(
  menus: MenuItem[],
  parentPath?: string[]
): FlatMenuItem[]
```

å°†åµŒå¥—çš„èœå•æ ‘ç»“æ„è½¬æ¢ä¸ºæ‰å¹³æ•°ç»„ï¼Œç”¨äºæœç´¢ã€‚

## ğŸ› å·²çŸ¥é—®é¢˜

æ— 

## ğŸ“„ è®¸å¯è¯

MIT
