"use strict";(self.webpackChunkant_admin_template=self.webpackChunkant_admin_template||[]).push([["7027"],{10894(e,t,s){s.r(t),s.d(t,{default:()=>l,requestWithDedup:()=>i});var n=s(88909),r=s(8161);let a=n.A.create({baseURL:"/book-engine",withCredentials:!0,timeout:3e4});a.interceptors.request.use(e=>(e.headers["X-Request-Time"]=Date.now().toString(),e),e=>Promise.reject(e)),a.interceptors.response.use(e=>{var t;let s=null==(t=e.config.headers)?void 0:t["X-Request-Time"];return s&&(Date.now(),parseInt(s,10)),e},e=>{if(!e.response)return Promise.reject(e);let{status:t}=e.response;return Promise.reject(e)});let i={get:(e,t)=>r.globalRequestDeduplicator.execute(e,"GET",()=>a.get(e,t).then(e=>e.data),null==t?void 0:t.params),post:(e,t,s)=>r.globalRequestDeduplicator.execute(e,"POST",()=>a.post(e,t,s).then(e=>e.data),t),put:(e,t,s)=>r.globalRequestDeduplicator.execute(e,"PUT",()=>a.put(e,t,s).then(e=>e.data),t),delete:(e,t)=>r.globalRequestDeduplicator.execute(e,"DELETE",()=>a.delete(e,t).then(e=>e.data),null==t?void 0:t.params)},l=a},8161(e,t,s){s.r(t),s.d(t,{RequestDeduplicator:()=>r,globalRequestDeduplicator:()=>a});var n=s(50467);class r{generateKey(e,t,s){let n=s?JSON.stringify(s):"";return`${t.toUpperCase()}:${e}:${n}`}async execute(e,t,s,n){if(!this.enabled)return s();let r=this.generateKey(e,t,n),a=this.pendingRequests.get(r);if(a)return a;let i=s().then(e=>(this.pendingRequests.delete(r),e)).catch(e=>{throw this.pendingRequests.delete(r),e});return this.pendingRequests.set(r,i),i}clearAll(){this.pendingRequests.clear()}getPendingCount(){return this.pendingRequests.size}setEnabled(e){this.enabled=e,e||this.clearAll()}constructor(e=!0){(0,n._)(this,"pendingRequests",new Map),(0,n._)(this,"enabled",void 0),this.enabled=e}}let a=new r(!0)}}]);