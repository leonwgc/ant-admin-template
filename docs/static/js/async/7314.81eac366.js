"use strict";(self.webpackChunkant_admin_template=self.webpackChunkant_admin_template||[]).push([["7314"],{65797(e,s,t){t.d(s,{A:()=>d});var i=t(74848),r=t(96540),n=function(){return(n=Object.assign||function(e){for(var s,t=1,i=arguments.length;t<i;t++)for(var r in s=arguments[t])Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);return e}).apply(this,arguments)},a=r.forwardRef(function(e,s){return(0,i.jsxs)("svg",n({viewBox:"0 0 36 36"},e,{ref:s,children:[(0,i.jsx)("path",{d:"M14.7656 15.1523V25.2773C14.7656 25.9763 14.199 26.543 13.5 26.543C12.801 26.543 12.2344 25.9763 12.2344 25.2773V15.1523C12.2344 14.4534 12.801 13.8867 13.5 13.8867C14.199 13.8867 14.7656 14.4534 14.7656 15.1523Z"}),(0,i.jsx)("path",{d:"M19.2656 25.2773V15.1523C19.2656 14.4534 18.699 13.8867 18 13.8867C17.301 13.8867 16.7344 14.4534 16.7344 15.1523V25.2773C16.7344 25.9763 17.301 26.543 18 26.543C18.699 26.543 19.2656 25.9763 19.2656 25.2773Z"}),(0,i.jsx)("path",{d:"M23.7656 15.1523V25.2773C23.7656 25.9763 23.199 26.543 22.5 26.543C21.801 26.543 21.2344 25.9763 21.2344 25.2773V15.1523C21.2344 14.4534 21.801 13.8867 22.5 13.8867C23.199 13.8867 23.7656 14.4534 23.7656 15.1523Z"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M11.8894 5.58064L11.028 8.4375H9.75703C9.46372 8.4375 9.24331 8.44941 9.06724 8.47266H5.20312C4.50414 8.47266 3.9375 9.0393 3.9375 9.73828C3.9375 10.4373 4.50414 11.0039 5.20312 11.0039H7.59375V29.8992C7.59375 30.6514 7.67207 30.9242 7.81914 31.1992C7.96621 31.4742 8.18204 31.69 8.45704 31.8371C8.73204 31.9842 9.00481 32.0625 9.75703 32.0625H26.243C26.9952 32.0625 27.268 31.9842 27.543 31.8371C27.818 31.69 28.0338 31.4742 28.1809 31.1992C28.3279 30.9242 28.4062 30.6514 28.4062 29.8992V11.0039H30.7969C31.4959 11.0039 32.0625 10.4373 32.0625 9.73828C32.0625 9.0393 31.4959 8.47266 30.7969 8.47266H26.9328C26.7567 8.44941 26.5363 8.4375 26.243 8.4375H24.9703L24.109 5.58064C23.9272 4.97781 23.8145 4.77317 23.65 4.57141C23.4855 4.36964 23.2841 4.21995 23.0434 4.12071C22.8027 4.02146 22.5743 3.97266 21.9447 3.97266H14.0537C13.424 3.97266 13.1956 4.02146 12.9549 4.12071C12.7142 4.21995 12.5128 4.36964 12.3483 4.57141C12.1838 4.77317 12.0711 4.97781 11.8894 5.58064ZM22.3265 8.4375L21.7435 6.50391H14.2548L13.6718 8.4375H22.3265ZM10.125 11.0039H25.875V27.3328C25.875 28.085 25.7967 28.3578 25.6496 28.6328C25.5025 28.9078 25.2867 29.1236 25.0117 29.2707C24.7367 29.4178 24.4639 29.4961 23.7117 29.4961H12.2883C11.5361 29.4961 11.2633 29.4178 10.9883 29.2707C10.7133 29.1236 10.4975 28.9078 10.3504 28.6328C10.2033 28.3578 10.125 28.085 10.125 27.3328V11.0039Z",clipRule:"evenodd"})]}))});a.displayName="DeleteOutlined";var o=t(17450),l=function(){return(l=Object.assign||function(e){for(var s,t=1,i=arguments.length;t<i;t++)for(var r in s=arguments[t])Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);return e}).apply(this,arguments)};let d=r.forwardRef(function(e,s){return(0,i.jsx)(o.A,l({},e,{isTwoTone:!1,ref:s,component:a}))})},4459(e,s,t){t.d(s,{A:()=>d});var i=t(74848),r=t(96540),n=function(){return(n=Object.assign||function(e){for(var s,t=1,i=arguments.length;t<i;t++)for(var r in s=arguments[t])Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);return e}).apply(this,arguments)},a=r.forwardRef(function(e,s){return(0,i.jsxs)("svg",n({viewBox:"0 0 36 36"},e,{ref:s,children:[(0,i.jsx)("path",{d:"M30.7969 16.7344C30.0979 16.7344 29.5312 17.301 29.5312 18V29.5313H6.46875V6.46875H18C18.699 6.46875 19.2656 5.90211 19.2656 5.20313C19.2656 4.50414 18.699 3.9375 18 3.9375H6.10078C5.34856 3.9375 5.07579 4.01582 4.80079 4.16289C4.52579 4.30996 4.30996 4.52579 4.16289 4.80079C4.01582 5.07579 3.9375 5.34856 3.9375 6.10078V29.8992C3.9375 30.6514 4.01582 30.9242 4.16289 31.1992C4.30996 31.4742 4.52579 31.69 4.80079 31.8371C5.07579 31.9842 5.34856 32.0625 6.10078 32.0625H29.8992C30.6514 32.0625 30.9242 31.9842 31.1992 31.8371C31.4742 31.69 31.69 31.4742 31.8371 31.1992C31.9842 30.9242 32.0625 30.6514 32.0625 29.8992V18C32.0625 17.301 31.4959 16.7344 30.7969 16.7344Z"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M30.6716 12.1087C30.6878 12.0924 30.7036 12.0758 30.7188 12.0589C32.5456 10.1887 32.5322 7.19158 30.6785 5.3379C28.8113 3.4707 25.784 3.4707 23.9168 5.3379L23.9243 5.34532C23.9056 5.36189 23.8874 5.3791 23.8695 5.39695L11.8328 17.4337C11.5419 17.6656 11.3555 18.023 11.3555 18.4239V23.3458C11.3555 24.0448 11.9221 24.6114 12.6211 24.6114H17.6484C18.0277 24.6114 18.3681 24.4445 18.6 24.1802L30.6716 12.1087ZM28.8887 10.3097L28.8898 10.3108L28.8817 10.3188L17.1204 22.0801H13.8867V18.9595L25.6594 7.18681C25.6924 7.15382 25.7232 7.11946 25.7518 7.08391C26.6334 6.24933 28.0249 6.26395 28.8887 7.12776C29.7674 8.00644 29.7674 9.43106 28.8887 10.3097Z",clipRule:"evenodd"})]}))});a.displayName="EditOutlined";var o=t(17450),l=function(){return(l=Object.assign||function(e){for(var s,t=1,i=arguments.length;t<i;t++)for(var r in s=arguments[t])Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);return e}).apply(this,arguments)};let d=r.forwardRef(function(e,s){return(0,i.jsx)(o.A,l({},e,{isTwoTone:!1,ref:s,component:a}))})},61804(e,s,t){t.d(s,{A:()=>d});var i=t(74848),r=t(96540),n=function(){return(n=Object.assign||function(e){for(var s,t=1,i=arguments.length;t<i;t++)for(var r in s=arguments[t])Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);return e}).apply(this,arguments)},a=r.forwardRef(function(e,s){return(0,i.jsx)("svg",n({viewBox:"0 0 36 36"},e,{ref:s,children:(0,i.jsx)("path",{d:"M16.5938 19.4062V28.9688C16.5938 29.7454 17.2233 30.375 18 30.375C18.7767 30.375 19.4062 29.7454 19.4062 28.9688V19.4062H28.9688C29.7454 19.4062 30.375 18.7767 30.375 18C30.375 17.2233 29.7454 16.5938 28.9688 16.5938H19.4062V7.03125C19.4062 6.2546 18.7767 5.625 18 5.625C17.2233 5.625 16.5938 6.2546 16.5938 7.03125V16.5938H7.03125C6.2546 16.5938 5.625 17.2233 5.625 18C5.625 18.7767 6.2546 19.4062 7.03125 19.4062H16.5938Z"})}))});a.displayName="PlusOutlined";var o=t(17450),l=function(){return(l=Object.assign||function(e){for(var s,t=1,i=arguments.length;t<i;t++)for(var r in s=arguments[t])Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);return e}).apply(this,arguments)};let d=r.forwardRef(function(e,s){return(0,i.jsx)(o.A,l({},e,{isTwoTone:!1,ref:s,component:a}))})},23980(e,s,t){t.r(s)},14361(e,s,t){t.r(s),t.d(s,{default:()=>f});var i=t(74848),r=t(96540),n=t(68874),a=t(99373),o=t(36813),l=t(58607),d=t(55021),p=t(26149),m=t(7727),c=t(29522),u=t(17481),y=t(84713),C=t(4459),h=t(65797),g=t(61804),x=t(53054);t(23980);let f=()=>{let{t:e}=(0,x.Bd)(),[s]=n.A.useForm(),[t,f]=(0,r.useState)([{id:"1",code:"user:view",name:"查看用户",type:"page",module:"user",description:"查看用户列表和详情",createdAt:"2024-01-01"},{id:"2",code:"user:create",name:"创建用户",type:"button",module:"user",description:"创建新用户",createdAt:"2024-01-01"},{id:"3",code:"user:update",name:"编辑用户",type:"button",module:"user",description:"编辑用户信息",createdAt:"2024-01-01"},{id:"4",code:"user:delete",name:"删除用户",type:"button",module:"user",description:"删除用户",createdAt:"2024-01-01"},{id:"5",code:"role:view",name:"查看角色",type:"page",module:"role",description:"查看角色列表",createdAt:"2024-01-02"},{id:"6",code:"role:create",name:"创建角色",type:"button",module:"role",description:"创建新角色",createdAt:"2024-01-02"},{id:"7",code:"menu:view",name:"查看菜单",type:"page",module:"menu",description:"查看菜单列表",createdAt:"2024-01-03"},{id:"8",code:"api:user:list",name:"用户列表接口",type:"api",module:"user",description:"GET /api/users",createdAt:"2024-01-04"}]),[j,A]=(0,r.useState)(!1),[v,w]=(0,r.useState)(null),[O,b]=(0,r.useState)(!1),[V,H]=(0,r.useState)(""),T=t.reduce((e,s)=>{var t;let i=e.find(e=>e.module===s.module);return i?i.permissions.push(s):e.push({module:s.module,moduleName:{user:"用户管理",role:"角色管理",menu:"菜单管理",permission:"权限管理"}[t=s.module]||t,permissions:[s]}),e},[]).filter(e=>!V||e.permissions.some(e=>e.name.toLowerCase().includes(V.toLowerCase())||e.code.toLowerCase().includes(V.toLowerCase()))),F=[{title:e("pages.system:permissionColCode"),dataIndex:"code",key:"code",width:200,render:e=>(0,i.jsx)(a.A,{children:e})},{title:e("pages.system:permissionColName"),dataIndex:"name",key:"name",width:150},{title:e("pages.system:permissionColType"),dataIndex:"type",key:"type",width:100,render:s=>{let t={page:{text:e("pages.system:permissionTypePage"),className:"permission-type-page"},button:{text:e("pages.system:permissionTypeButton"),className:"permission-type-button"},api:{text:e("pages.system:permissionTypeApi"),className:"permission-type-api"}}[s];return(0,i.jsx)(a.A,{className:t.className,children:t.text})}},{title:e("pages.system:permissionColDescription"),dataIndex:"description",key:"description"},{title:e("pages.system:permissionColCreatedAt"),dataIndex:"createdAt",key:"createdAt",width:120},{title:e("pages.system:permissionColActions"),key:"actions",width:150,fixed:"right",render:(s,t)=>(0,i.jsxs)(o.A,{children:[(0,i.jsx)(l.Ay,{type:"link",size:"small",icon:(0,i.jsx)(C.A,{}),onClick:()=>N(t),children:e("pages.system:permissionBtnEdit")}),(0,i.jsx)(d.A,{title:e("pages.system:permissionMsgDeleteConfirm"),onConfirm:()=>k(t.id),okText:e("common:yes"),cancelText:e("common:no"),children:(0,i.jsx)(l.Ay,{type:"link",size:"small",danger:!0,icon:(0,i.jsx)(h.A,{}),children:e("pages.system:permissionBtnDelete")})})]})}],N=e=>{w(e),s.setFieldsValue(e),A(!0)},k=e=>{f(t.filter(s=>s.id!==e))},L=async()=>{try{let e=await s.validateFields();if(b(!0),v)f(t.map(s=>s.id===v.id?{...s,...e}:s));else{let s={id:Date.now().toString(),...e,createdAt:new Date().toISOString().split("T")[0]};f([...t,s])}A(!1),s.resetFields()}catch(e){console.error("Validation failed:",e)}finally{b(!1)}};return(0,i.jsxs)("div",{className:"permission-management",children:[(0,i.jsxs)("div",{className:"permission-management__header",children:[(0,i.jsx)("h2",{children:e("pages.system:permissionTitle")}),(0,i.jsxs)(o.A,{children:[(0,i.jsx)(p.A.Search,{placeholder:e("pages.system:permissionSearchPh"),style:{width:250},onSearch:H,allowClear:!0}),(0,i.jsx)(l.Ay,{type:"primary",icon:(0,i.jsx)(g.A,{}),onClick:()=>{w(null),s.resetFields(),A(!0)},children:e("pages.system:permissionBtnAdd")})]})]}),(0,i.jsx)(m.A,{defaultActiveKey:T.map(e=>e.module),items:T.map(e=>({key:e.module,label:(0,i.jsxs)("div",{className:"permission-management__panel-header",children:[(0,i.jsx)("span",{className:"permission-management__panel-title",children:e.moduleName}),(0,i.jsxs)(a.A,{children:[e.permissions.length," 个权限"]})]}),children:(0,i.jsx)(c.A,{columns:F,dataSource:e.permissions,rowKey:"id",pagination:!1,size:"small",scroll:{x:"max-content"}})}))}),(0,i.jsx)(u.A,{title:v?e("pages.system:permissionModalTitleEdit"):e("pages.system:permissionModalTitleAdd"),open:j,onOk:L,onCancel:()=>A(!1),confirmLoading:O,width:600,children:(0,i.jsxs)(n.A,{form:s,layout:"vertical",children:[(0,i.jsx)(n.A.Item,{name:"code",label:e("pages.system:permissionFormCode"),rules:[{required:!0,message:e("pages.system:permissionFormCodeRequired")},{pattern:/^[a-z:_]+$/,message:e("pages.system:permissionFormCodePattern")}],children:(0,i.jsx)(p.A,{placeholder:e("pages.system:permissionFormCodePh"),disabled:!!v})}),(0,i.jsx)(n.A.Item,{name:"name",label:e("pages.system:permissionFormName"),rules:[{required:!0,message:e("pages.system:permissionFormNameRequired")}],children:(0,i.jsx)(p.A,{placeholder:e("pages.system:permissionFormNamePh")})}),(0,i.jsx)(n.A.Item,{name:"module",label:e("pages.system:permissionFormModule"),rules:[{required:!0,message:e("pages.system:permissionFormModuleRequired")}],children:(0,i.jsxs)(y.A,{placeholder:e("pages.system:permissionFormModulePh"),children:[(0,i.jsx)(y.A.Option,{value:"user",children:"用户管理"}),(0,i.jsx)(y.A.Option,{value:"role",children:"角色管理"}),(0,i.jsx)(y.A.Option,{value:"menu",children:"菜单管理"}),(0,i.jsx)(y.A.Option,{value:"permission",children:"权限管理"})]})}),(0,i.jsx)(n.A.Item,{name:"type",label:e("pages.system:permissionFormType"),rules:[{required:!0}],initialValue:"button",children:(0,i.jsxs)(y.A,{children:[(0,i.jsx)(y.A.Option,{value:"page",children:e("pages.system:permissionTypePage")}),(0,i.jsx)(y.A.Option,{value:"button",children:e("pages.system:permissionTypeButton")}),(0,i.jsx)(y.A.Option,{value:"api",children:e("pages.system:permissionTypeApi")})]})}),(0,i.jsx)(n.A.Item,{name:"description",label:e("pages.system:permissionFormDescription"),children:(0,i.jsx)(p.A.TextArea,{rows:3,placeholder:e("pages.system:permissionFormDescriptionPh")})})]})})]})}}}]);