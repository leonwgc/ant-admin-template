"use strict";(self.webpackChunkneat_admin_template=self.webpackChunkneat_admin_template||[]).push([["1850"],{75340(e,t,r){r.r(t)},33329(e,t,r){r.r(t),r.d(t,{default:()=>p});var n=r(74848),i=r(96540),a=r(24922),o=r(39437),l=r(12229),c=r(36813),s=r(58607);r(75340);let{Title:u,Text:m}=l.A,d=[{blocks:[{x:0,y:0,z:0},{x:1,y:0,z:0},{x:2,y:0,z:0},{x:3,y:0,z:0}],color:65535},{blocks:[{x:0,y:0,z:0},{x:1,y:0,z:0},{x:0,y:1,z:0},{x:1,y:1,z:0}],color:0xffff00},{blocks:[{x:0,y:0,z:0},{x:1,y:0,z:0},{x:2,y:0,z:0},{x:1,y:1,z:0}],color:8388736},{blocks:[{x:0,y:0,z:0},{x:0,y:1,z:0},{x:0,y:2,z:0},{x:1,y:2,z:0}],color:0xff7f00},{blocks:[{x:1,y:0,z:0},{x:1,y:1,z:0},{x:1,y:2,z:0},{x:0,y:2,z:0}],color:255},{blocks:[{x:1,y:0,z:0},{x:2,y:0,z:0},{x:0,y:1,z:0},{x:1,y:1,z:0}],color:65280},{blocks:[{x:0,y:0,z:0},{x:1,y:0,z:0},{x:1,y:1,z:0},{x:2,y:1,z:0}],color:0xff0000}],p=()=>{let e=(0,i.useRef)(null),[t,r]=(0,i.useState)(0),[l,p]=(0,i.useState)(1),[f,y]=(0,i.useState)(!1),[x,h]=(0,i.useState)(!1),[T,w]=(0,i.useState)(!0),[A,v]=(0,i.useState)(0),g=(0,i.useRef)(null),z=(0,i.useRef)(null),q=(0,i.useRef)(null),V=(0,i.useRef)([]),R=(0,i.useRef)({x:4,y:0,z:0}),_=(0,i.useRef)([]),j=(0,i.useRef)(null),k=(0,i.useRef)(0),E=(0,i.useRef)(null),M=(0,i.useRef)(0),b=(0,i.useRef)(0);(0,i.useEffect)(()=>(E.current=new(window.AudioContext||window.webkitAudioContext),()=>{var e;null==(e=E.current)||e.close()}),[]),(0,i.useEffect)(()=>{if(!e.current)return;let t=new a.Z58;t.background=new a.Q1f(1710638),g.current=t;let r=new a.ubm(75,e.current.clientWidth/e.current.clientHeight,.1,1e3);r.position.set(5,10,20),r.lookAt(5,10,0),z.current=r;let n=new o.JeP({antialias:!0});n.setSize(e.current.clientWidth,e.current.clientHeight),e.current.appendChild(n.domElement),q.current=n;let i=new a.$p8(0xffffff,.5);t.add(i);let l=new a.ZyN(0xffffff,.8);l.position.set(10,20,10),t.add(l),P(t),N(t);let c=()=>{e.current&&r&&n&&(r.aspect=e.current.clientWidth/e.current.clientHeight,r.updateProjectionMatrix(),n.setSize(e.current.clientWidth,e.current.clientHeight))};window.addEventListener("resize",c);let s=()=>{requestAnimationFrame(s),n&&t&&r&&n.render(t,r)};return s(),()=>{window.removeEventListener("resize",c),e.current&&n&&e.current.removeChild(n.domElement),null==n||n.dispose()}},[]);let P=e=>{_.current=Array(20).fill(null).map(()=>Array(10).fill(null).map(()=>[,].fill(null)))},N=e=>{let t=new a.mrM({color:4473924}),r=new a.LoY().setFromPoints([new a.Pq0(0,0,0),new a.Pq0(10,0,0),new a.Pq0(10,0,1),new a.Pq0(0,0,1),new a.Pq0(0,0,0)]);e.add(new a.N1A(r,t));for(let r=0;r<=10;r++){let n=new a.LoY().setFromPoints([new a.Pq0(r,0,0),new a.Pq0(r,20,0)]);e.add(new a.N1A(n,t))}for(let r=0;r<=20;r++){let n=new a.LoY().setFromPoints([new a.Pq0(0,r,0),new a.Pq0(10,r,0)]);e.add(new a.N1A(n,t))}},F=()=>{let e=d[Math.floor(Math.random()*d.length)],t=Math.floor(5)-2;return V.current=e.blocks.map(r=>{var n,i,o,l,c;let s,u,m,d=(i=t+r.x,o=19-r.y,l=r.z,c=e.color,s=new a.iNn(.9,.9,.9),u=new a.tXL({color:c}),(m=new a.eaF(s,u)).position.set(i+.5,o+.5,l+.5),m);return null==(n=g.current)||n.add(d),{position:{x:t+r.x,y:19-r.y,z:r.z},mesh:d}}),R.current={x:t,y:19,z:0},!!G(0,0,0)||(h(!0),y(!1),(()=>{if(!T||!E.current)return;let e=E.current,t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.type="sawtooth",t.frequency.setValueAtTime(500,e.currentTime),t.frequency.exponentialRampToValueAtTime(50,e.currentTime+.5),r.gain.setValueAtTime(.25,e.currentTime),r.gain.linearRampToValueAtTime(.15,e.currentTime+.25),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),t.start(e.currentTime),t.stop(e.currentTime+.5);let n=e.createOscillator(),i=e.createGain();n.connect(i),i.connect(e.destination),n.type="sine",n.frequency.setValueAtTime(200,e.currentTime+.5),n.frequency.exponentialRampToValueAtTime(100,e.currentTime+.7),i.gain.setValueAtTime(.2,e.currentTime+.5),i.gain.exponentialRampToValueAtTime(.01,e.currentTime+.7),n.start(e.currentTime+.5),n.stop(e.currentTime+.7)})(),!1)},G=(e,t,r)=>V.current.every(n=>{var i,a;let o=n.position.x+e,l=n.position.y+t,c=n.position.z+r;return!(o<0)&&!(o>=10)&&!(l<0)&&!(l>=20)&&(null==(a=_.current[l])||null==(i=a[o])||!i[c])}),O=(e,t,r)=>{G(e,t,r)&&(V.current.forEach(n=>{n.position.x+=e,n.position.y+=t,n.position.z+=r,n.mesh.position.set(n.position.x+.5,n.position.y+.5,n.position.z+.5)}),R.current.x+=e,R.current.y+=t,R.current.z+=r,(()=>{if(!T||!E.current)return;let e=E.current,t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.type="sine",t.frequency.setValueAtTime(600,e.currentTime),t.frequency.exponentialRampToValueAtTime(800,e.currentTime+.04),r.gain.setValueAtTime(.15,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.08),t.start(e.currentTime),t.stop(e.currentTime+.08)})())},S=()=>{V.current.forEach(e=>{let{x:t,y:r,z:n}=e.position;_.current[r][t][n]=e.mesh}),(()=>{if(!T||!E.current)return;let e=E.current;[300,150].forEach((t,r)=>{let n=e.createOscillator(),i=e.createGain();n.connect(i),i.connect(e.destination),n.type=0===r?"sine":"triangle",n.frequency.value=t;let a=e.currentTime+.02*r;i.gain.setValueAtTime(.2,a),i.gain.exponentialRampToValueAtTime(.01,a+.12),n.start(a),n.stop(a+.12)})})(),L(),V.current=[]},C=(e,t,r)=>{let n=[],i=[];for(let l=0;l<30;l++){var o;let l=new a.Gu$(.1,8,8),c=new a.tXL({color:r,emissive:r,emissiveIntensity:.5,transparent:!0,opacity:1}),s=new a.eaF(l,c);s.position.set(e+.5,t+.5,.5);let u=new a.Pq0((Math.random()-.5)*.3,(Math.random()-.5)*.3,(Math.random()-.5)*.3);null==(o=g.current)||o.add(s),n.push(s),i.push(u)}let l=0,c=()=>{l++,n.forEach((e,t)=>{e.position.add(i[t]),i[t].y-=.01,e.material.opacity=1-l/60,e.scale.setScalar(1-l/60)}),l<60?requestAnimationFrame(c):n.forEach(e=>{var t;null==(t=g.current)||t.remove(e),e.geometry.dispose(),e.material.dispose()})};c()},L=()=>{let e=0,t=[];for(let r=0;r<20;r++){let n=!0;for(let e=0;e<10;e++)if(!_.current[r][e][0]){n=!1;break}n&&(t.push(r),e++)}if(t.length>0){let n=performance.now();n-b.current>3e3&&(M.current=0),M.current+=1,b.current=n;let i=M.current;v(i),t.forEach(e=>{var t,r;let n,i,o,l,c,s,u,m,d,p,f;n=new a.bdM(10,1),i=new a.V9B({color:0xffd700,transparent:!0,opacity:.6,side:2}),(o=new a.eaF(n,i)).position.set(5,e+.5,.3),null==(t=g.current)||t.add(o),l=0,(c=()=>{if(i.opacity=.6+.3*Math.sin(.3*l),++l<20)requestAnimationFrame(c);else{var e;null==(e=g.current)||e.remove(o),n.dispose(),i.dispose()}})(),s=new a.rKP(.5,1,32),u=new a.V9B({color:0xff00ff,side:2,transparent:!0,opacity:.8}),(m=new a.eaF(s,u)).position.set(5,e+.5,.5),m.rotation.x=Math.PI/2,null==(r=g.current)||r.add(m),d=1,p=.8,(f=()=>{if(d+=.5,p-=.05,m.scale.set(d,d,1),u.opacity=p,p>0)requestAnimationFrame(f);else{var e;null==(e=g.current)||e.remove(m),s.dispose(),u.dispose()}})(),(e=>{let t=[];for(let n=0;n<5;n++){var r;let n=[],i=10*Math.random(),o=e+.5;n.push(new a.Pq0(i,o,.5));for(let e=0;e<8;e++)i+=(Math.random()-.5)*2,i=Math.max(0,Math.min(10,i)),n.push(new a.Pq0(i,o,.5+(Math.random()-.5)*.5));let l=new a.LoY().setFromPoints(n),c=new a.mrM({color:65535,linewidth:3,transparent:!0,opacity:1}),s=new a.N1A(l,c);null==(r=g.current)||r.add(s),t.push(s)}let n=1,i=()=>{n-=.1,t.forEach(e=>{e.material.opacity=n}),n>0?requestAnimationFrame(i):t.forEach(e=>{var t;null==(t=g.current)||t.remove(e),e.geometry.dispose(),e.material.dispose()})};i()})(e);for(let t=0;t<10;t++){let r=_.current[e][t][0];if(r){let t=r.material.color.getHex();C(r.position.x-.5,e,t);let n=1,i=()=>{if(n-=.05,r.scale.setScalar(n),r.rotation.x+=.1,r.rotation.y+=.1,r.rotation.z+=.1,n>0)requestAnimationFrame(i);else{var e;null==(e=g.current)||e.remove(r),r.geometry.dispose(),r.material.dispose()}};i()}}}),setTimeout(()=>{t.sort((e,t)=>e-t),t.forEach((e,t)=>{let r=e-t;for(let e=r;e<19;e++)for(let t=0;t<10;t++){_.current[e][t][0]=_.current[e+1][t][0];let r=_.current[e][t][0];r&&(r.position.y-=1)}for(let e=0;e<10;e++)_.current[19][e][0]=null})},300),((e,t)=>{if(!T||!E.current)return;let r=E.current,n=Math.min(e,4),i=Math.min(t/5,1),a=.25+.15*i,o=1-.3*i,l=[523.25,659.25,783.99,1046.5].map(e=>e*(1+.2*i)),c=[392,493.88,587.33,783.99].map(e=>e*(1+.2*i));if(l.slice(0,n).forEach((e,t)=>{let n=r.createOscillator(),i=r.createGain();n.connect(i),i.connect(r.destination),n.type="sine",n.frequency.value=e;let l=r.currentTime+.08*t*o;i.gain.setValueAtTime(a,l),i.gain.exponentialRampToValueAtTime(.01,l+.25),n.start(l),n.stop(l+.25)}),c.slice(0,n).forEach((e,t)=>{let n=r.createOscillator(),i=r.createGain();n.connect(i),i.connect(r.destination),n.type="triangle",n.frequency.value=e;let l=r.currentTime+.08*t*o;i.gain.setValueAtTime(.6*a,l),i.gain.exponentialRampToValueAtTime(.01,l+.25),n.start(l),n.stop(l+.25)}),e>=2||t>1){let e=Math.min(3+2*t,10),n=[1568,2093,2637,3136,3729,4186];for(let t=0;t<e;t++){let e=n[t%n.length]*(1+.1*Math.random()),a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),a.type="sine",a.frequency.value=e;let l=r.currentTime+.03*t+.1;o.gain.setValueAtTime(.08+.08*i,l),o.gain.exponentialRampToValueAtTime(.01,l+.12),a.start(l),a.stop(l+.12)}}if(t>=3){let e=r.createOscillator(),t=r.createGain();e.connect(t),t.connect(r.destination),e.type="sine",e.frequency.setValueAtTime(80,r.currentTime),e.frequency.exponentialRampToValueAtTime(40,r.currentTime+.2),t.gain.setValueAtTime(.3+.2*i,r.currentTime),t.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),e.start(r.currentTime),e.stop(r.currentTime+.2)}if(t>=5)for(let e=0;e<20;e++){let e=r.createOscillator(),t=r.createGain();e.connect(t),t.connect(r.destination),e.type="sawtooth",e.frequency.value=100+2e3*Math.random();let n=r.currentTime+.15*Math.random();t.gain.setValueAtTime(.05,n),t.gain.exponentialRampToValueAtTime(.01,n+.08),e.start(n),e.stop(n+.08)}t>=7&&[523.25,659.25,783.99,1046.5,1318.51,1568].forEach((e,t)=>{let n=r.createOscillator(),i=r.createGain();n.connect(i),i.connect(r.destination),n.type="square",n.frequency.value=e;let a=r.currentTime+.2+.04*t;i.gain.setValueAtTime(.15,a),i.gain.exponentialRampToValueAtTime(.01,a+.3),n.start(a),n.stop(a+.3)})})(e,i);let o=i>1?(i-1)*50:0;r(t=>t+100*e*l+o)}else performance.now()-b.current>3e3&&(M.current=0,v(0))},H=e=>{if(f){if(e-k.current>Math.max(200,1e3-50*l)){if(G(0,-1,0))O(0,-1,0);else if(S(),!F())return;k.current=e}j.current=requestAnimationFrame(H)}},D=()=>{V.current.forEach(e=>{var t;null==(t=g.current)||t.remove(e.mesh)});for(let t=0;t<20;t++)for(let r=0;r<10;r++){let n=_.current[t][r][0];if(n){var e;null==(e=g.current)||e.remove(n)}}P(g.current),r(0),p(1),h(!1),y(!0),F(),k.current=performance.now(),j.current=requestAnimationFrame(H)};return(0,i.useEffect)(()=>{let e=e=>{if(f)switch(["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"," "].includes(e.key)&&e.preventDefault(),e.key){case"ArrowLeft":O(-1,0,0);break;case"ArrowRight":O(1,0,0);break;case"ArrowDown":O(0,-1,0);break;case"ArrowUp":let t,r,n;t=R.current.x+1.5,r=R.current.y-1.5,(n=V.current.map(e=>{let n=e.position.x-t;return{x:Math.round(t-(e.position.y-r)),y:Math.round(r+n),z:e.position.z}})).every(e=>{var t,r;return e.x>=0&&e.x<10&&e.y>=0&&e.y<20&&!(null==(r=_.current[e.y])||null==(t=r[e.x])?void 0:t[e.z])})&&(V.current.forEach((e,t)=>{e.position=n[t],e.mesh.position.set(e.position.x+.5,e.position.y+.5,e.position.z+.5)}),(()=>{if(!T||!E.current)return;let e=E.current;[400,600,900].forEach((t,r)=>{let n=e.createOscillator(),i=e.createGain();n.connect(i),i.connect(e.destination),n.type="triangle",n.frequency.value=t;let a=e.currentTime+.03*r;i.gain.setValueAtTime(.12,a),i.gain.exponentialRampToValueAtTime(.01,a+.1),n.start(a),n.stop(a+.1)})})());break;case" ":for(;G(0,-1,0);)O(0,-1,0);S(),F()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f]),(0,i.useEffect)(()=>{t>0&&t%500==0&&p(e=>((()=>{if(!T||!E.current)return;let e=E.current;[523.25,587.33,659.25,783.99,880,1046.5].forEach((t,r)=>{let n=e.createOscillator(),i=e.createGain();n.connect(i),i.connect(e.destination),n.type="triangle",n.frequency.value=t;let a=e.currentTime+.06*r;i.gain.setValueAtTime(.22,a),i.gain.exponentialRampToValueAtTime(.01,a+.18),n.start(a),n.stop(a+.18)}),[1568,2093,2637,3136].forEach((t,r)=>{let n=e.createOscillator(),i=e.createGain();n.connect(i),i.connect(e.destination),n.type="sine",n.frequency.value=t;let a=e.currentTime+.25+.04*r;i.gain.setValueAtTime(.15,a),i.gain.exponentialRampToValueAtTime(.01,a+.15),n.start(a),n.stop(a+.15)}),[523.25,659.25,783.99].forEach(t=>{let r=e.createOscillator(),n=e.createGain();r.connect(n),n.connect(e.destination),r.type="sine",r.frequency.value=t;let i=e.currentTime+.4;n.gain.setValueAtTime(.18,i),n.gain.exponentialRampToValueAtTime(.01,i+.3),r.start(i),r.stop(i+.3)})})(),e+1))},[t]),(0,n.jsxs)("div",{className:"tetris-3d",children:[(0,n.jsxs)("div",{className:"tetris-3d__header",children:[(0,n.jsx)(u,{level:2,children:"3D Tetris"}),(0,n.jsxs)("div",{className:"tetris-3d__stats",children:[(0,n.jsxs)("div",{className:"tetris-3d__stat",children:[(0,n.jsx)(m,{strong:!0,children:"Score:"}),(0,n.jsx)(m,{className:"tetris-3d__stat-value",children:t})]}),(0,n.jsxs)("div",{className:"tetris-3d__stat",children:[(0,n.jsx)(m,{strong:!0,children:"Level:"}),(0,n.jsx)(m,{className:"tetris-3d__stat-value",children:l})]}),A>1&&(0,n.jsxs)("div",{className:"tetris-3d__stat tetris-3d__stat--combo",children:[(0,n.jsx)(m,{strong:!0,children:"Combo:"}),(0,n.jsxs)(m,{className:"tetris-3d__stat-value tetris-3d__stat-value--combo",children:[A,"x \uD83D\uDD25"]})]})]})]}),(0,n.jsxs)("div",{className:"tetris-3d__content",children:[(0,n.jsx)("div",{ref:e,className:"tetris-3d__canvas"}),(0,n.jsx)("div",{className:"tetris-3d__controls",children:(0,n.jsxs)(c.A,{direction:"vertical",size:"large",children:[!f&&!x&&(0,n.jsx)(s.Ay,{type:"primary",size:"large",onClick:D,children:"Start Game"}),f&&(0,n.jsx)(s.Ay,{size:"large",onClick:()=>{y(!1),j.current&&cancelAnimationFrame(j.current)},children:"Pause"}),!f&&!x&&V.current.length>0&&(0,n.jsx)(s.Ay,{type:"primary",size:"large",onClick:()=>{y(!0),k.current=performance.now(),j.current=requestAnimationFrame(H)},children:"Resume"}),x&&(0,n.jsx)(s.Ay,{type:"primary",size:"large",onClick:D,children:"Restart"}),(0,n.jsx)(s.Ay,{size:"large",onClick:()=>w(!T),type:T?"default":"dashed",children:T?"\uD83D\uDD0A Sound On":"\uD83D\uDD07 Sound Off"}),(0,n.jsxs)("div",{className:"tetris-3d__instructions",children:[(0,n.jsx)(u,{level:5,children:"Controls:"}),(0,n.jsx)(m,{children:"← → : Move left/right"}),(0,n.jsx)(m,{children:"↓ : Move down"}),(0,n.jsx)(m,{children:"↑ : Rotate"}),(0,n.jsx)(m,{children:"Space : Hard drop"})]})]})})]}),x&&(0,n.jsxs)("div",{className:"tetris-3d__game-over",children:[(0,n.jsx)(u,{level:3,children:"Game Over!"}),(0,n.jsxs)(m,{children:["Final Score: ",t]})]})]})}}}]);