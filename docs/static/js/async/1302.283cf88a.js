"use strict";(self.webpackChunkneat_admin_template=self.webpackChunkneat_admin_template||[]).push([["1302"],{66352(e,t,a){a.r(t)},29877(e,t,a){a.r(t),a.d(t,{default:()=>u});var r=a(74848),l=a(96540),n=a(12229),c=a(36813),s=a(58607);a(66352);let{Title:i,Text:o}=n.A,h=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6","#1abc9c"],m=["\uD83C\uDF4E","\uD83C\uDF4A","\uD83C\uDF4B","\uD83C\uDF47","\uD83C\uDF53","\uD83C\uDF49"],u=()=>{let[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(null),[u,d]=(0,l.useState)(0),[p,f]=(0,l.useState)(0),[x,_]=(0,l.useState)(30),[v,w]=(0,l.useState)(!1),[j,y]=(0,l.useState)(!1),[g,M]=(0,l.useState)(!0),[T,$]=(0,l.useState)(0),[b,N]=(0,l.useState)(!1),[A,S]=(0,l.useState)([]),k=(0,l.useRef)([]),C=(0,l.useRef)(0),z=(0,l.useRef)(0),R=(0,l.useRef)(null),V=(0,l.useRef)([]),D=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=window.AudioContext||window.webkitAudioContext;e&&(R.current=new e);let t=localStorage.getItem("match3-bestscore");return t&&f(parseInt(t,10)),()=>{var e;null==(e=R.current)||e.close(),D.current&&cancelAnimationFrame(D.current)}},[]);let q=(e,t,a,r)=>{let l=64*t+10+30,n=64*e+10+30,c=Math.min(15+3*r,30),s=[];for(let e=0;e<c;e++){let t=2*Math.PI*e/c+.5*Math.random(),r=2+4*Math.random(),i=3+5*Math.random();s.push({id:`particle-${Date.now()}-${e}-${Math.random()}`,x:l,y:n,vx:Math.cos(t)*r,vy:Math.sin(t)*r,color:a,size:i,life:1})}let i=Math.min(8+r,15);for(let e=0;e<i;e++){let t=Math.random()*Math.PI*2,a=3+5*Math.random(),r=2+3*Math.random();s.push({id:`spark-${Date.now()}-${e}-${Math.random()}`,x:l,y:n,vx:Math.cos(t)*a,vy:Math.sin(t)*a,color:"#ffffff",size:r,life:.7})}V.current.push(...s),D.current||O()},O=()=>{let e=Date.now(),t=()=>{let a=Date.now(),r=(a-e)/16.67;if(e=a,0===V.current.length){D.current=null,S([]);return}let l=V.current,n=0;for(let e=0;e<l.length;e++){let t=l[e];t.x+=t.vx*r,t.y+=t.vy*r,t.vy+=.3*r,t.vx*=Math.pow(.97,r),t.life-=.025*r,t.size*=Math.pow(.95,r),t.life>0&&t.size>.5&&(n!==e&&(l[n]=t),n++)}l.length=n,.3>Math.random()&&S([...l]),l.length>0?D.current=requestAnimationFrame(t):(D.current=null,S([]))};D.current||(e=Date.now(),D.current=requestAnimationFrame(t))},P=(e,t)=>{if(!g||!R.current)return;let a=R.current,r=523.25+50*e+30*t;for(let t=0;t<Math.min(e,3);t++){let e=a.createOscillator(),l=a.createGain();e.connect(l),l.connect(a.destination),e.type="sine",e.frequency.value=r+100*t;let n=a.currentTime+.05*t;l.gain.setValueAtTime(.3,n),l.gain.exponentialRampToValueAtTime(.01,n+.2),e.start(n),e.stop(n+.2)}},G=e=>{if(!g||!R.current||e<=1)return;let t=R.current;[659.25,783.99,1046.5].forEach((e,a)=>{let r=t.createOscillator(),l=t.createGain();r.connect(l),l.connect(t.destination),r.type="sine",r.frequency.value=e;let n=t.currentTime+.08*a;l.gain.setValueAtTime(.25,n),l.gain.exponentialRampToValueAtTime(.01,n+.2),r.start(n),r.stop(n+.2)})},E=()=>{let e=[];for(let t=0;t<8;t++){e[t]=[];for(let a=0;a<8;a++)e[t][a]={type:Math.floor(Math.random()*h.length),row:t,col:a,id:`${t}-${a}-${Date.now()}-${Math.random()}`,matched:!1}}return e},F=e=>{let t=[];for(let a=0;a<8;a++){let r=1;for(let l=0;l<8;l++)if(l<7&&e[a][l].type===e[a][l+1].type)r++;else{if(r>=3){let n=[];for(let t=l-r+1;t<=l;t++)n.push(e[a][t]);t.push(n)}r=1}}for(let a=0;a<8;a++){let r=1;for(let l=0;l<8;l++)if(l<7&&e[l][a].type===e[l+1][a].type)r++;else{if(r>=3){let n=[];for(let t=l-r+1;t<=l;t++)n.push(e[t][a]);t.push(n)}r=1}}return t},I=async()=>{N(!0);let e=[...k.current.map(e=>[...e])],a=!0,r=0;for(;a;){let l=F(e);if(0===l.length){a=!1;break}z.current=++r,$(r);let n=new Set;l.forEach(e=>{e.forEach(e=>{n.add(`${e.row}-${e.col}`),q(e.row,e.col,h[e.type],l.length)})});let c=n.size,s=10*c*r;C.current+=s,d(C.current),P(c,r),r>1&&G(r),C.current>p&&(f(C.current),localStorage.setItem("match3-bestscore",C.current.toString())),e=e.map(e=>e.map(e=>n.has(`${e.row}-${e.col}`)?{...e,matched:!0}:e)),await new Promise(e=>setTimeout(e,300));for(let t=0;t<8;t++){let a=7;for(let r=7;r>=0;r--)!e[r][t].matched&&(r!==a&&(e[a][t]={...e[r][t],row:a,id:`${a}-${t}-${Date.now()}-${Math.random()}`}),a--);for(let r=a;r>=0;r--)e[r][t]={type:Math.floor(Math.random()*h.length),row:r,col:t,id:`${r}-${t}-${Date.now()}-${Math.random()}`,matched:!1}}k.current=e,t([...e]),await new Promise(e=>setTimeout(e,200))}0===r&&(z.current=0,$(0)),N(!1)},B=async(e,a,r,l)=>{if(b)return;let c=k.current.map(e=>[...e]),s=c[e][a];if(c[e][a]={...c[r][l],row:e,col:a},c[r][l]={...s,row:r,col:l},k.current=c,t([...c]),(()=>{if(!g||!R.current)return;let e=R.current,t=e.createOscillator(),a=e.createGain();t.connect(a),a.connect(e.destination),t.type="sine",t.frequency.setValueAtTime(400,e.currentTime),t.frequency.exponentialRampToValueAtTime(600,e.currentTime+.1),a.gain.setValueAtTime(.2,e.currentTime),a.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1),t.start(e.currentTime),t.stop(e.currentTime+.1)})(),await new Promise(e=>setTimeout(e,200)),F(c).length>0)_(e=>e-1),await I(),x-1<=0&&(y(!0),w(!1),(()=>{if(!g||!R.current)return;let e=R.current;[400,350,300].forEach((t,a)=>{let r=e.createOscillator(),l=e.createGain();r.connect(l),l.connect(e.destination),r.type="sawtooth",r.frequency.value=t;let n=e.currentTime+.15*a;l.gain.setValueAtTime(.2,n),l.gain.exponentialRampToValueAtTime(.01,n+.3),r.start(n),r.stop(n+.3)})})());else{let n=c.map(e=>[...e]),s=n[e][a];n[e][a]={...n[r][l],row:e,col:a},n[r][l]={...s,row:r,col:l},k.current=n,t([...n])}n(null)},H=()=>{let e=E();for(;F(e).length>0;)e=E();k.current=e,t(e),C.current=0,d(0),z.current=0,$(0),_(30),y(!1),w(!0),n(null),N(!1),V.current=[],S([]),D.current&&(cancelAnimationFrame(D.current),D.current=null)};return(0,r.jsxs)("div",{className:"match-3",children:[(0,r.jsxs)("div",{className:"match-3__header",children:[(0,r.jsx)(i,{level:2,children:"Match 3"}),(0,r.jsxs)("div",{className:"match-3__stats",children:[(0,r.jsxs)("div",{className:"match-3__stat",children:[(0,r.jsx)(o,{strong:!0,children:"Score:"}),(0,r.jsx)(o,{className:"match-3__stat-value",children:u})]}),(0,r.jsxs)("div",{className:"match-3__stat",children:[(0,r.jsx)(o,{strong:!0,children:"Best:"}),(0,r.jsx)(o,{className:"match-3__stat-value match-3__stat-value--best",children:p})]}),(0,r.jsxs)("div",{className:"match-3__stat",children:[(0,r.jsx)(o,{strong:!0,children:"Moves:"}),(0,r.jsx)(o,{className:"match-3__stat-value match-3__stat-value--moves",children:x})]}),T>1&&(0,r.jsxs)("div",{className:"match-3__stat match-3__stat--combo",children:[(0,r.jsx)(o,{strong:!0,children:"Combo:"}),(0,r.jsxs)(o,{className:"match-3__stat-value match-3__stat-value--combo",children:[T,"x \uD83D\uDD25"]})]})]})]}),(0,r.jsxs)("div",{className:"match-3__content",children:[(0,r.jsx)("div",{className:"match-3__board-container",children:(0,r.jsxs)("div",{className:"match-3__board",style:{width:532,height:532},children:[e.map((e,t)=>e.map((e,l)=>(0,r.jsx)("div",{className:`match-3__cell ${(null==a?void 0:a.row)===t&&(null==a?void 0:a.col)===l?"match-3__cell--selected":""} ${e.matched?"match-3__cell--matched":""}`,style:{width:60,height:60,top:64*t+10,left:64*l+10,backgroundColor:h[e.type],transition:"all 0.2s ease-out"},onClick:()=>((e,t)=>{if(v&&!j&&!b)if(a){let r=Math.abs(a.row-e),l=Math.abs(a.col-t);1===r&&0===l||0===r&&1===l?B(a.row,a.col,e,t):n({row:e,col:t})}else n({row:e,col:t})})(t,l),children:(0,r.jsx)("span",{className:"match-3__emoji",children:m[e.type]})},e.id))),A.map(e=>(0,r.jsx)("div",{className:"match-3__particle",style:{left:e.x,top:e.y,width:e.size,height:e.size,backgroundColor:e.color,opacity:e.life,boxShadow:`0 0 ${2*e.size}px ${e.color}`}},e.id))]})}),(0,r.jsx)("div",{className:"match-3__controls",children:(0,r.jsxs)(c.A,{direction:"vertical",size:"large",children:[!v&&(0,r.jsx)(s.Ay,{type:"primary",size:"large",onClick:H,children:"New Game"}),v&&(0,r.jsx)(s.Ay,{type:"primary",size:"large",onClick:H,children:"Restart"}),(0,r.jsx)(s.Ay,{size:"large",onClick:()=>M(!g),children:g?"\uD83D\uDD0A Sound On":"\uD83D\uDD07 Sound Off"}),(0,r.jsxs)("div",{className:"match-3__instructions",children:[(0,r.jsx)(i,{level:5,children:"How to Play:"}),(0,r.jsx)(o,{children:"Click two adjacent tiles to swap them."}),(0,r.jsx)(o,{children:"Match 3 or more same tiles to score!"}),(0,r.jsx)(o,{children:"Create combos for bonus points!"}),(0,r.jsx)("br",{}),(0,r.jsx)(i,{level:5,children:"Scoring:"}),(0,r.jsx)(o,{children:"3 tiles = 30 points"}),(0,r.jsx)(o,{children:"4 tiles = 40 points"}),(0,r.jsx)(o,{children:"5 tiles = 50 points"}),(0,r.jsx)(o,{children:"Combo multiplier!"})]})]})})]}),j&&(0,r.jsx)("div",{className:"match-3__overlay",children:(0,r.jsxs)("div",{className:"match-3__message",children:[(0,r.jsx)(i,{level:2,children:"Game Over!"}),(0,r.jsxs)(o,{children:["Final Score: ",u]}),(0,r.jsxs)(o,{children:["Moves Used: ",30]}),u===p&&u>0&&(0,r.jsx)(o,{className:"match-3__new-record",children:"\uD83C\uDF89 New Best Score! \uD83C\uDF89"}),(0,r.jsx)(s.Ay,{type:"primary",size:"large",onClick:H,style:{marginTop:20},children:"Play Again"})]})})]})}}}]);