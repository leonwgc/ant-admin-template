"use strict";(self.webpackChunkneat_admin_template=self.webpackChunkneat_admin_template||[]).push([["5378"],{13794(e,t,r){r.d(t,{A:()=>o});var n=r(31635),a=r(96540),l=r(68645),s=r(7259);let u=function(e,t){void 0===t&&(t={});var r,u=t.defaultPageSize,i=void 0===u?10:u,o=t.defaultCurrent,d=(0,n.Tt)(t,["defaultPageSize","defaultCurrent"]),c=(0,s.A)(e,(0,n.Cl)({defaultParams:[{current:void 0===o?1:o,pageSize:i}],refreshDepsAction:function(){A(1)}},d)),p=c.params[0]||{},f=p.current,g=void 0===f?1:f,v=p.pageSize,m=void 0===v?i:v,h=(null==(r=c.data)?void 0:r.total)||0,y=(0,a.useMemo)(function(){return Math.ceil(h/m)},[m,h]),b=function(e,t){var r=e<=0?1:e,a=t<=0?1:t,l=Math.ceil(h/a);r>l&&(r=Math.max(1,l));var s=(0,n.zs)(c.params||[]),u=s[0],i=s.slice(1);c.run.apply(c,(0,n.fX)([(0,n.Cl)((0,n.Cl)({},void 0===u?{}:u),{current:r,pageSize:a})],(0,n.zs)(i),!1))},A=function(e){b(e,m)};return(0,n.Cl)((0,n.Cl)({},c),{pagination:{current:g,pageSize:m,total:h,totalPage:y,onChange:(0,l.A)(b),changeCurrent:(0,l.A)(A),changePageSize:(0,l.A)(function(e){b(g,e)})}})};var i=r(14369);let o=function(e,t){void 0===t&&(t={});var r,s=t.form,o=t.defaultType,d=t.defaultParams,c=t.manual,p=void 0!==c&&c,f=t.refreshDeps,g=t.ready,v=void 0===g||g,m=(0,n.Tt)(t,["form","defaultType","defaultParams","manual","refreshDeps","ready"]),h=u(e,(0,n.Cl)((0,n.Cl)({ready:v,manual:!0},m),{onSuccess:function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];R.current=!0,null==(e=m.onSuccess)||e.call.apply(e,(0,n.fX)([m],(0,n.zs)(t),!1))}})),y=h.params,b=void 0===y?[]:y,A=h.run,C=b[2]||{},P=(0,n.zs)((0,a.useState)((null==C?void 0:C.type)||(void 0===o?"simple":o)),2),z=P[0],S=P[1],x=(0,a.useRef)({}),j=(0,a.useRef)([]),R=(0,a.useRef)(!1),F=!!(null==s?void 0:s.getInternalHooks),O=function(){if(!s)return{};if(F)return s.getFieldsValue(null,function(){return!0});var e=s.getFieldsValue(),t={};return Object.keys(e).forEach(function(r){(!s.getFieldInstance||s.getFieldInstance(r))&&(t[r]=e[r])}),t},q=function(){if(!s)return Promise.resolve({});var e=Object.keys(O());return F?s.validateFields(e):new Promise(function(t,r){s.validateFields(e,function(e,n){e?r(e):t(n)})})},w=function(){if(s){if(F)return s.setFieldsValue(x.current);var e={};Object.keys(x.current).forEach(function(t){(!s.getFieldInstance||s.getFieldInstance(t))&&(e[t]=x.current[t])}),s.setFieldsValue(e)}},D=function(e){v&&setTimeout(function(){q().then(function(r){void 0===r&&(r={});var a=e||(0,n.Cl)((0,n.Cl)({pageSize:t.defaultPageSize||10},(null==b?void 0:b[0])||{}),{current:1});s?(x.current=(0,n.Cl)((0,n.Cl)({},x.current),r),A(a,r,{allFormData:x.current,type:z})):A(a)}).catch(function(e){return e})})};(0,a.useEffect)(function(){if(b.length>0){x.current=(null==C?void 0:C.allFormData)||{},w(),A.apply(void 0,(0,n.fX)([],(0,n.zs)(b),!1));return}v&&(x.current=(null==d?void 0:d[1])||{},w(),p||D(null==d?void 0:d[0]))},[]),(0,i.A)(function(){v&&w()},[z]);var T=(0,a.useRef)(!1);return T.current=!1,(0,i.A)(function(){!p&&v&&(T.current=!0,s&&s.resetFields(),x.current=(null==d?void 0:d[1])||{},w(),D(null==d?void 0:d[0]))},[v]),(0,i.A)(function(){T.current||v&&(p||(T.current=!0,h.pagination.changeCurrent(1)))},(0,n.fX)([],(0,n.zs)(void 0===f?[]:f),!1)),(0,n.Cl)((0,n.Cl)({},h),{tableProps:{dataSource:(null==(r=h.data)?void 0:r.list)||j.current,loading:h.loading,onChange:(0,l.A)(function(e,t,r,a){var l=(0,n.zs)(b||[]),s=l[0],u=l.slice(1);A.apply(void 0,(0,n.fX)([(0,n.Cl)((0,n.Cl)({},s),{current:e.current,pageSize:e.pageSize,filters:t,sorter:r,extra:a})],(0,n.zs)(u),!1))}),pagination:{current:h.pagination.current,pageSize:h.pagination.pageSize,total:h.pagination.total}},search:{submit:(0,l.A)(function(e){var r,a,l;null==(r=null==e?void 0:e.preventDefault)||r.call(e),D(R.current?void 0:(0,n.Cl)({pageSize:t.defaultPageSize||(null==(l=null==(a=t.defaultParams)?void 0:a[0])?void 0:l.pageSize)||10,current:1},(null==d?void 0:d[0])||{}))}),type:z,changeType:(0,l.A)(function(){var e=O();x.current=(0,n.Cl)((0,n.Cl)({},x.current),e),S(function(e){return"simple"===e?"advance":"simple"})}),reset:(0,l.A)(function(){var e,r;s&&s.resetFields(),D((0,n.Cl)((0,n.Cl)({},(null==d?void 0:d[0])||{}),{pageSize:t.defaultPageSize||(null==(r=null==(e=t.defaultParams)?void 0:e[0])?void 0:r.pageSize)||10,current:1}))})}})}},16370(e,t,r){r.d(t,{A:()=>n});let n=r(26606).A},90124(e,t,r){r.d(t,{A:()=>s});var n=r(96540),a=r(62279),l=r(94241);let s=(e,t,r)=>{var s,u;let i,{variant:o,[e]:d}=n.useContext(a.QO),c=n.useContext(l.Pp),p=null==d?void 0:d.variant;i=void 0!==t?t:!1===r?"borderless":null!=(u=null!=(s=null!=c?c:p)?s:o)?u:"outlined";let f=a.lJ.includes(i);return[i,f]}},22046(e,t,r){r.r(t),r.d(t,{default:()=>O});var n=r(74848),a=r(13794),l=r(68874),s=r(26149),u=r(36813),i=r(58607),o=r(52930),d=r(29522),c=r(96540),p=r(16370),f=r(19341),g=Object.defineProperty,v=Object.defineProperties,m=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&A(e,r,t[r]);if(h)for(var r of h(t))b.call(t,r)&&A(e,r,t[r]);return e},P=(e,t)=>{var r={};for(var n in e)y.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))0>t.indexOf(n)&&b.call(e,n)&&(r[n]=e[n]);return r},z=({item:e,span:t=24,layoutType:r})=>{let n=e;if("function"==typeof n.getJSON&&(n=n.getJSON()),"object"!=typeof n||!n)return null;let a=n,{type:l,name:s,rules:u,label:i,element:o,elProps:d={},itemProps:g={},render:h}=a,y=P(a,["type","name","rules","label","element","elProps","itemProps","render"]),b={};return"grid"===r&&(b=v(C({},b),m({span:t}))),c.createElement("grid"===r?p.A:c.Fragment,b,c.createElement(f.A.Item,v(C(C({name:s,label:i,rules:u},y),g),m({shouldUpdate:g.shouldUpdate||"function"==typeof o||"function"==typeof h})),void 0!==o?o:void 0!==h?h:void 0!==l&&c.createElement(l,d)))},S=e=>{var{layout:t}=e,r=P(e,["layout"]);return c.createElement(o.A,C({},r),t.map((e,t)=>c.createElement(z,{item:e,key:t,layoutType:"flex"})))},x=r(31290),j=r(53054),R=r(10894);let F=(e,t)=>{let{current:r,pageSize:n}=e,a=`page=${r}&size=${n}`;return R.default.post(`/users?${a}`,t).then(e=>({total:e.data.total,list:e.data.list}))},O=()=>{let{t:e}=(0,j.Bd)("pages.user"),[t]=l.A.useForm(),{tableProps:r,search:{submit:p,reset:f}}=(0,a.A)(F,{form:t,defaultParams:[{current:1,pageSize:5},{name:"hello",age:"18",address:"shanghai"}]}),g=[{title:e("pages.user:usersColName"),dataIndex:"name"},{title:e("pages.user:usersColAge"),dataIndex:"age"},{title:e("pages.user:usersColAddress"),dataIndex:"address"}],v=(0,c.useMemo)(()=>[{type:s.A,name:"name",label:e("pages.user:usersFormName")},{type:s.A,name:"age",label:e("pages.user:usersFormAge")},{type:s.A,name:"address",label:e("pages.user:usersFormAddress")},{render:()=>(0,n.jsxs)(u.A,{children:[(0,n.jsx)(i.Ay,{htmlType:"submit",type:"primary",onClick:p,children:e("pages.user:usersBtnSubmit")}),(0,n.jsx)(i.Ay,{htmlType:"reset",onClick:f,children:e("pages.user:usersBtnReset")})]})}],[p,f,e]);return(0,n.jsxs)("div",{children:[(0,n.jsxs)(o.A,{justify:"space-between",wrap:!0,children:[(0,n.jsx)("h1",{children:e("pages.user:usersTitle")}),(0,n.jsxs)(u.A,{children:[(0,n.jsx)(x.N_,{to:"./add",children:e("pages.user:usersBtnAdd")}),(0,n.jsx)(x.N_,{to:"./edit",children:e("pages.user:usersBtnEdit")})]})]}),(0,n.jsx)(l.A,{form:t,layout:"horizontal",children:(0,n.jsx)(S,{wrap:!0,layout:v,gap:16})}),(0,n.jsx)(d.A,{columns:g,rowKey:"key",scroll:{x:"max-content"},...r})]})}},10894(e,t,r){r.r(t),r.d(t,{default:()=>u,requestWithDedup:()=>s});var n=r(88909),a=r(8161);let l=n.A.create({baseURL:"/book-engine",withCredentials:!0,timeout:3e4});l.interceptors.request.use(e=>(e.headers["X-Request-Time"]=Date.now().toString(),e),e=>Promise.reject(e)),l.interceptors.response.use(e=>{var t;let r=null==(t=e.config.headers)?void 0:t["X-Request-Time"];return r&&(Date.now(),parseInt(r,10)),e},e=>{if(!e.response)return Promise.reject(e);let{status:t}=e.response;return Promise.reject(e)});let s={get:(e,t)=>a.globalRequestDeduplicator.execute(e,"GET",()=>l.get(e,t).then(e=>e.data),null==t?void 0:t.params),post:(e,t,r)=>a.globalRequestDeduplicator.execute(e,"POST",()=>l.post(e,t,r).then(e=>e.data),t),put:(e,t,r)=>a.globalRequestDeduplicator.execute(e,"PUT",()=>l.put(e,t,r).then(e=>e.data),t),delete:(e,t)=>a.globalRequestDeduplicator.execute(e,"DELETE",()=>l.delete(e,t).then(e=>e.data),null==t?void 0:t.params)},u=l},8161(e,t,r){r.r(t),r.d(t,{RequestDeduplicator:()=>a,globalRequestDeduplicator:()=>l});var n=r(50467);class a{generateKey(e,t,r){let n=r?JSON.stringify(r):"";return`${t.toUpperCase()}:${e}:${n}`}async execute(e,t,r,n){if(!this.enabled)return r();let a=this.generateKey(e,t,n),l=this.pendingRequests.get(a);if(l)return l;let s=r().then(e=>(this.pendingRequests.delete(a),e)).catch(e=>{throw this.pendingRequests.delete(a),e});return this.pendingRequests.set(a,s),s}clearAll(){this.pendingRequests.clear()}getPendingCount(){return this.pendingRequests.size}setEnabled(e){this.enabled=e,e||this.clearAll()}constructor(e=!0){(0,n._)(this,"pendingRequests",new Map),(0,n._)(this,"enabled",void 0),this.enabled=e}}let l=new a(!0)}}]);