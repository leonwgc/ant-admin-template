"use strict";(self.webpackChunkant_admin_template=self.webpackChunkant_admin_template||[]).push([["8477"],{29045(e,r,s){s.r(r)},14054(e,r,s){s.r(r),s.d(r,{default:()=>g});var t=s(74848),a=s(96540),n=s(99373),i=s(36813),l=s(58607),d=s(16629),c=s(47152),o=s(16370),h=s(57486),m=s(29522),p=s(85402),u=s(6365),x=s(48273);s(29045);let g=()=>{let e,r,s,[g,f]=(0,a.useState)({}),[j,v]=(0,a.useState)(!0),[_,A]=(0,a.useState)(new Date),C=async()=>{v(!0);try{let e=await (0,x.getWebVitals)();f(e),A(new Date)}catch(e){console.error("Failed to load web vitals:",e)}finally{v(!1)}};(0,a.useEffect)(()=>{C()},[]);let N={LCP:{description:"最大内容绘制时间 - 衡量页面主要内容的加载速度",threshold:"优秀: < 2.5s | 需改进: 2.5s - 4s | 差: > 4s"},CLS:{description:"累积布局偏移 - 衡量页面视觉稳定性",threshold:"优秀: < 0.1 | 需改进: 0.1 - 0.25 | 差: > 0.25"},INP:{description:"交互到下一次绘制 - 衡量页面交互响应性",threshold:"优秀: < 200ms | 需改进: 200ms - 500ms | 差: > 500ms"},FCP:{description:"首次内容绘制 - 衡量首个内容元素渲染时间",threshold:"优秀: < 1.8s | 需改进: 1.8s - 3s | 差: > 3s"},TTFB:{description:"首字节时间 - 衡量服务器响应速度",threshold:"优秀: < 800ms | 需改进: 800ms - 1800ms | 差: > 1800ms"}},S=Object.keys(N).map(e=>{var r;let s=g[e];return{name:e,value:(null==s?void 0:s.value)||0,rating:(null==s?void 0:s.rating)||"good",formattedValue:s?(r=s.value,"CLS"===e?r.toFixed(3):`${Math.round(r)} ms`):"-",description:N[e].description,threshold:N[e].threshold}}),{score:y,rating:w}=(r=(e=Object.values(g).map(e=>"good"===e.rating?100:50*("needs-improvement"===e.rating))).length>0?e.reduce((e,r)=>e+r,0)/e.length:0,s="poor",r>=80?s="good":r>=50&&(s="needs-improvement"),{score:Math.round(r),rating:s}),b=[{title:"指标",dataIndex:"name",key:"name",width:100,render:e=>(0,t.jsx)("strong",{children:e})},{title:"数值",dataIndex:"formattedValue",key:"formattedValue",width:120},{title:"评级",dataIndex:"rating",key:"rating",width:100,render:e=>(0,t.jsx)(n.A,{className:(e=>{switch(e){case"good":return"rating-good";case"needs-improvement":return"rating-warning";case"poor":return"rating-error";default:return""}})(e),children:(e=>{switch(e){case"good":return"优秀";case"needs-improvement":return"需改进";case"poor":return"差";default:return"未知"}})(e)})},{title:"说明",dataIndex:"description",key:"description"},{title:"阈值",dataIndex:"threshold",key:"threshold",width:300}];return(0,t.jsxs)("div",{className:"performance-page",children:[(0,t.jsxs)("div",{className:"performance-page__header",children:[(0,t.jsx)("h1",{children:"性能监控"}),(0,t.jsxs)(i.A,{children:[(0,t.jsxs)("span",{className:"performance-page__timestamp",children:["最后更新: ",_.toLocaleTimeString()]}),(0,t.jsx)(l.Ay,{icon:(0,t.jsx)(p.A,{}),onClick:C,loading:j,children:"刷新"})]})]}),(0,t.jsx)(d.A,{className:"performance-page__score-card",children:(0,t.jsxs)(c.A,{gutter:16,align:"middle",children:[(0,t.jsx)(o.A,{flex:"auto",children:(0,t.jsxs)("div",{className:"performance-page__score",children:[(0,t.jsx)(u.A,{className:"performance-page__trophy"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"综合性能评分"}),(0,t.jsx)("p",{children:"基于 5 项核心 Web Vitals 指标计算"})]})]})}),(0,t.jsx)(o.A,{children:(0,t.jsx)(h.A,{value:y,suffix:"/100",valueStyle:{fontSize:48,color:"good"===w?"#0cce6b":"needs-improvement"===w?"#ffa400":"#ff4e42"}})})]})}),(0,t.jsx)(c.A,{gutter:16,className:"performance-page__metrics",children:["LCP","CLS","INP"].map(e=>{let r=g[e];return(0,t.jsx)(o.A,{span:8,children:(0,t.jsxs)(d.A,{children:[(0,t.jsx)(h.A,{title:e,value:r?"CLS"===e?r.value.toFixed(3):Math.round(r.value):"-",suffix:"CLS"===e?"":"ms",valueStyle:{color:r?"good"===r.rating?"#0cce6b":"needs-improvement"===r.rating?"#ffa400":"#ff4e42":"#666"}}),(0,t.jsx)("div",{className:"performance-page__metric-desc",children:N[e].description})]})},e)})}),(0,t.jsx)(c.A,{gutter:16,className:"performance-page__metrics",children:["FCP","TTFB"].map(e=>{let r=g[e];return(0,t.jsx)(o.A,{span:8,children:(0,t.jsxs)(d.A,{children:[(0,t.jsx)(h.A,{title:e,value:r?Math.round(r.value):"-",suffix:"ms",valueStyle:{color:r?"good"===r.rating?"#0cce6b":"needs-improvement"===r.rating?"#ffa400":"#ff4e42":"#666"}}),(0,t.jsx)("div",{className:"performance-page__metric-desc",children:N[e].description})]})},e)})}),(0,t.jsx)(d.A,{title:"详细指标",className:"performance-page__table",children:(0,t.jsx)(m.A,{columns:b,dataSource:S,pagination:!1,rowKey:"name",loading:j})}),(0,t.jsx)(d.A,{title:"\uD83D\uDCA1 性能优化建议",className:"performance-page__tips",children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"LCP 优化:"})," 使用图片懒加载、CDN 加速、减少关键资源体积"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"CLS 优化:"})," 为图片/视频预留空间、避免动态插入内容、使用骨架屏"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"INP 优化:"})," 优化事件处理函数、使用防抖/节流、减少主线程阻塞"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"FCP 优化:"})," 内联关键 CSS、预加载关键资源、减少渲染阻塞"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"TTFB 优化:"})," 使用 CDN、启用缓存、优化服务器响应时间"]})]})})]})}},77548(e,r,s){s.r(r),s.d(r,{default:()=>t.default});var t=s(14054)}}]);