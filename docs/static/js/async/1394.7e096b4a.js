"use strict";(self.webpackChunkant_admin_template=self.webpackChunkant_admin_template||[]).push([["1394"],{62588(e,s,t){t.r(s)},12857(e,s,t){t.r(s),t.d(s,{default:()=>b});var n=t(74848),i=t(96540),a=t(68874),l=t(99373),m=t(36813),r=t(58607),d=t(55021),p=t(98254),o=t(17481),u=t(26149),c=t(84713),y=t(2733),h=t(82690),g=t(61804),x=t(4459),A=t(65797),j=t(53054);t(62588);let b=()=>{let{t:e}=(0,j.Bd)(),[s]=a.A.useForm(),[t,b]=(0,i.useState)([{id:"1",parentId:null,name:"系统管理",path:"/system",icon:"SettingOutlined",sort:1,type:"menu",visible:!0,children:[{id:"1-1",parentId:"1",name:"用户管理",path:"/system/users",sort:1,type:"page",visible:!0,permission:"user:view"},{id:"1-2",parentId:"1",name:"角色管理",path:"/system/roles",sort:2,type:"page",visible:!0,permission:"role:view"},{id:"1-3",parentId:"1",name:"菜单管理",path:"/system/menus",sort:3,type:"page",visible:!0,permission:"menu:view"}]},{id:"2",parentId:null,name:"组件示例",path:"/components",icon:"AppstoreOutlined",sort:2,type:"menu",visible:!0,children:[{id:"2-1",parentId:"2",name:"表单组件",path:"/components/form",sort:1,type:"page",visible:!0},{id:"2-2",parentId:"2",name:"表格组件",path:"/components/table",sort:2,type:"page",visible:!0}]}]),[v,I]=(0,i.useState)(!1),[F,k]=(0,i.useState)(null),[w,C]=(0,i.useState)(!1),[O,f]=(0,i.useState)(["1","2"]),N=[{title:e("pages.system:menuColName"),dataIndex:"name",key:"name",width:160},{title:e("pages.system:menuColPath"),dataIndex:"path",key:"path",width:200},{title:e("pages.system:menuColIcon"),dataIndex:"icon",key:"icon",width:120,render:e=>e&&(0,n.jsx)(l.A,{children:e})},{title:e("pages.system:menuColType"),dataIndex:"type",key:"type",width:100,render:s=>{let t={menu:{text:e("pages.system:menuTypeMenu"),className:"menu-type-menu"},page:{text:e("pages.system:menuTypePage"),className:"menu-type-page"},button:{text:e("pages.system:menuTypeButton"),className:"menu-type-button"}}[s];return(0,n.jsx)(l.A,{className:t.className,children:t.text})}},{title:e("pages.system:menuColSort"),dataIndex:"sort",key:"sort",width:80},{title:e("pages.system:menuColVisible"),dataIndex:"visible",key:"visible",width:100,render:s=>(0,n.jsx)(l.A,{className:s?"menu-visible-yes":"menu-visible-no",children:s?e("pages.system:menuVisibleYes"):e("pages.system:menuVisibleNo")})},{title:e("pages.system:menuColPermission"),dataIndex:"permission",key:"permission",width:150,render:e=>e&&(0,n.jsx)(l.A,{children:e})},{title:e("pages.system:menuColActions"),key:"actions",fixed:"right",render:(s,t)=>(0,n.jsxs)(m.A,{children:[(0,n.jsx)(r.Ay,{type:"link",size:"small",icon:(0,n.jsx)(g.A,{}),onClick:()=>P(t),children:e("pages.system:menuBtnAddChild")}),(0,n.jsx)(r.Ay,{type:"link",size:"small",icon:(0,n.jsx)(x.A,{}),onClick:()=>T(t),children:e("pages.system:menuBtnEdit")}),(0,n.jsx)(d.A,{title:e("pages.system:menuMsgDeleteConfirm"),onConfirm:()=>S(t.id),okText:e("common:yes"),cancelText:e("common:no"),children:(0,n.jsx)(r.Ay,{type:"link",size:"small",danger:!0,icon:(0,n.jsx)(A.A,{}),children:e("pages.system:menuBtnDelete")})})]})}],P=e=>{var t;k(null),s.resetFields(),s.setFieldsValue({parentId:e.id,type:"page",sort:((null==(t=e.children)?void 0:t.length)||0)+1,visible:!0}),I(!0)},T=e=>{k(e),s.setFieldsValue(e),I(!0)},S=e=>{let s=t=>t.filter(s=>s.id!==e).map(e=>({...e,children:e.children?s(e.children):void 0}));b(s(t))},V=async()=>{try{let e=await s.validateFields();if(C(!0),F){let s=t=>t.map(t=>t.id===F.id?{...t,...e}:t.children?{...t,children:s(t.children)}:t);b(s(t))}else{let s={id:Date.now().toString(),...e};if(e.parentId){let n=t=>t.map(t=>t.id===e.parentId?{...t,children:[...t.children||[],s]}:t.children?{...t,children:n(t.children)}:t);b(n(t))}else b([...t,s])}I(!1),s.resetFields()}catch(e){console.error("Validation failed:",e)}finally{C(!1)}};return(0,n.jsxs)("div",{className:"menu-management",children:[(0,n.jsxs)("div",{className:"menu-management__header",children:[(0,n.jsx)("h2",{children:e("pages.system:menuTitle")}),(0,n.jsx)(r.Ay,{type:"primary",icon:(0,n.jsx)(g.A,{}),onClick:()=>{k(null),s.resetFields(),s.setFieldsValue({type:"menu",sort:1,visible:!0}),I(!0)},children:e("pages.system:menuBtnAdd")})]}),(0,n.jsx)(p.A,{scroll:{x:"max-content"},columns:N,dataSource:t,rowKey:"id",pagination:!1,expandable:{expandedRowKeys:O,onExpandedRowsChange:e=>f(e)}}),(0,n.jsx)(o.A,{title:F?e("pages.system:menuModalTitleEdit"):e("pages.system:menuModalTitleAdd"),open:v,onOk:V,onCancel:()=>I(!1),confirmLoading:w,width:600,children:(0,n.jsxs)(a.A,{form:s,layout:"vertical",children:[(0,n.jsx)(a.A.Item,{name:"parentId",hidden:!0,children:(0,n.jsx)(u.A,{})}),(0,n.jsx)(a.A.Item,{name:"name",label:e("pages.system:menuFormName"),rules:[{required:!0,message:e("pages.system:menuFormNameRequired")}],children:(0,n.jsx)(u.A,{placeholder:e("pages.system:menuFormNamePh")})}),(0,n.jsx)(a.A.Item,{name:"path",label:e("pages.system:menuFormPath"),rules:[{required:!0,message:e("pages.system:menuFormPathRequired")}],children:(0,n.jsx)(u.A,{placeholder:e("pages.system:menuFormPathPh")})}),(0,n.jsx)(a.A.Item,{name:"icon",label:e("pages.system:menuFormIcon"),children:(0,n.jsx)(c.A,{placeholder:e("pages.system:menuFormIconPh"),allowClear:!0,children:["UserOutlined","SettingOutlined","AppstoreOutlined","MenuOutlined","FormOutlined","TableOutlined","FileOutlined","DashboardOutlined"].map(e=>(0,n.jsx)(c.A.Option,{value:e,children:e},e))})}),(0,n.jsx)(a.A.Item,{name:"type",label:e("pages.system:menuFormType"),rules:[{required:!0}],children:(0,n.jsxs)(c.A,{children:[(0,n.jsx)(c.A.Option,{value:"menu",children:e("pages.system:menuTypeMenu")}),(0,n.jsx)(c.A.Option,{value:"page",children:e("pages.system:menuTypePage")}),(0,n.jsx)(c.A.Option,{value:"button",children:e("pages.system:menuTypeButton")})]})}),(0,n.jsx)(a.A.Item,{name:"sort",label:e("pages.system:menuFormSort"),rules:[{required:!0}],children:(0,n.jsx)(y.A,{min:1,style:{width:"100%"}})}),(0,n.jsx)(a.A.Item,{name:"visible",label:e("pages.system:menuFormVisible"),valuePropName:"checked",children:(0,n.jsx)(h.A,{})}),(0,n.jsx)(a.A.Item,{name:"permission",label:e("pages.system:menuFormPermission"),children:(0,n.jsx)(u.A,{placeholder:e("pages.system:menuFormPermissionPh")})})]})})]})}}}]);