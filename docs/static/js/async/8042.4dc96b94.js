"use strict";(self.webpackChunkant_admin_template=self.webpackChunkant_admin_template||[]).push([["8042"],{17948(e,a,r){r.r(a)},65153(e,a,r){r.r(a),r.d(a,{default:()=>y});var l=r(74848),s=r(96540),o=r(93673),n=r(9934),d=r(58607),c=r(36813),i=r(2733),t=r(66837),m=r(39576),_=r(47770),u=r(36296),h=r(88996),v=r(74353),x=r.n(v);r(16033),r(17948);var j=r(4459);let{RangePicker:N}=o.A,f={Mon:"周一",Tue:"周二",Wed:"周三",Thu:"周四",Fri:"周五",Sat:"周六",Sun:"周日"},y=()=>{let[e,a]=(0,s.useState)("inventory"),[r,o]=(0,s.useState)([x()("2025-11-27"),x()("2025-12-25")]),v=(0,s.useRef)(null),y=(0,s.useRef)([]),[b,g]=(0,s.useState)({}),[p,A]=(0,s.useState)(null),[k,M]=(0,s.useState)({}),E=(0,s.useMemo)(()=>[{id:"1",name:"高级大床房",roomNumber:"10000101"},{id:"2",name:"高级双床房",roomNumber:"10000102"},{id:"3",name:"标准大床房",roomNumber:"10000103"},{id:"4",name:"标准双床房",roomNumber:"10000104"},{id:"5",name:"高级商务大床房",roomNumber:"10000105"},{id:"6",name:"高级商务双床房",roomNumber:"10000106"}],[]),L=(0,s.useMemo)(()=>{let e=[],[a,l]=r,s=a;for(;s.isBefore(l)||s.isSame(l,"day");){let a=s.format("ddd");e.push({date:s,day:s.date(),weekday:f[a]||a,month:s.month(),year:s.year()}),s=s.add(1,"day")}return e},[r]),Y=(0,s.useMemo)(()=>{let e={};return L.forEach(a=>{let r=`${a.year}-${a.month}`;e[r]||(e[r]=[]),e[r].push(a)}),e},[L]);return(0,s.useEffect)(()=>{let e=v.current,a=[...y.current],r=()=>{e&&a.forEach(a=>{a&&(a.scrollLeft=e.scrollLeft)})},l=r=>()=>{let l=a[r];e&&l&&(e.scrollLeft=l.scrollLeft,a.forEach((e,a)=>{e&&a!==r&&(e.scrollLeft=l.scrollLeft)}))};return null==e||e.addEventListener("scroll",r),a.forEach((e,a)=>{null==e||e.addEventListener("scroll",l(a))}),()=>{null==e||e.removeEventListener("scroll",r),a.forEach((e,a)=>{null==e||e.removeEventListener("scroll",l(a))})}},[E.length]),(0,s.useEffect)(()=>{g(e=>{let a={...e};return E.forEach(e=>{a[e.id]&&a[e.id].length===L.length||(a[e.id]=Array(L.length).fill(0))}),a}),M(e=>{let a={...e};return E.forEach(e=>{a[e.id]&&a[e.id].length!==L.length&&(a[e.id]=Array(L.length).fill(0))}),a})},[E,L.length]),(0,l.jsxs)("div",{className:"room-calendar",children:[(0,l.jsxs)("div",{className:"room-calendar__function-bar",children:[(0,l.jsx)("div",{className:"room-calendar__tabs",children:(0,l.jsx)(n.A,{value:e,onChange:e=>a(e),options:[{label:"库存",value:"inventory"},{label:"房价",value:"price"},{label:"房态",value:"status"}]})}),(0,l.jsxs)("div",{className:"room-calendar__actions",children:[(0,l.jsx)(d.Ay,{icon:(0,l.jsx)(t.A,{}),className:"room-calendar__action-btn"}),(0,l.jsx)(d.Ay,{icon:(0,l.jsx)(m.A,{}),className:"room-calendar__action-btn"}),(0,l.jsx)(d.Ay,{icon:(0,l.jsx)(_.A,{}),className:"room-calendar__action-btn"})]})]}),(0,l.jsxs)("div",{className:"room-calendar__date-row",children:[(0,l.jsxs)("div",{className:"room-calendar__date-controls",children:[(0,l.jsx)(d.Ay,{icon:(0,l.jsx)(u.A,{}),onClick:()=>{let e=r[1].diff(r[0],"day")+1;o([r[0].subtract(e,"day"),r[1].subtract(e,"day")])},size:"large",className:"room-calendar__nav-btn",type:"tertiary",variant:"text"}),(0,l.jsx)(N,{value:r,onChange:e=>{e&&e[0]&&e[1]&&(e[1].diff(e[0],"day")>60?o([e[0],e[0].add(60,"day")]):o([e[0],e[1]]))},format:"YYYY-MM-DD",size:"large",className:"room-calendar__range-picker",disabledDate:(e,a)=>{let{from:r}=a;return!!r&&Math.abs(e.diff(r,"day"))>60},separator:"~"}),(0,l.jsx)(d.Ay,{icon:(0,l.jsx)(h.A,{}),onClick:()=>{let e=r[1].diff(r[0],"day")+1;o([r[0].add(e,"day"),r[1].add(e,"day")])},size:"large",className:"room-calendar__nav-btn",type:"tertiary",variant:"text"})]}),(0,l.jsx)("div",{className:"room-calendar__date-header",ref:v,children:Object.entries(Y).map(e=>{let[a,r]=e,[s,o]=a.split("-").map(Number);return(0,l.jsxs)("div",{className:"room-calendar__month-group",children:[(0,l.jsx)("div",{className:"room-calendar__month-label",children:`${o+1}月, ${s}`}),(0,l.jsx)("div",{className:"room-calendar__date-columns",children:r.map(e=>(0,l.jsxs)("div",{className:"room-calendar__date-cell",children:[(0,l.jsx)("div",{className:"room-calendar__date-day",children:e.day}),(0,l.jsx)("div",{className:"room-calendar__date-weekday",children:e.weekday})]},e.date.format("YYYY-MM-DD")))})]},a)})}),(0,l.jsx)(d.Ay,{icon:(0,l.jsx)(h.A,{}),size:"small",className:"room-calendar__scroll-btn",onClick:()=>{v.current&&(v.current.scrollLeft+=200)}})]}),(0,l.jsx)("div",{className:"room-calendar__content",children:(0,l.jsx)("div",{className:"room-calendar__room-list",children:E.map((e,a)=>(0,l.jsxs)("div",{className:"room-calendar__room-row",children:[(0,l.jsxs)("div",{className:"room-calendar__room-info",children:[(0,l.jsx)("div",{className:"room-calendar__room-icon",children:(0,l.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,l.jsx)("path",{d:"M3 13h18v8H3v-8zM3 13V8a2 2 0 012-2h14a2 2 0 012 2v5M7 6V4a2 2 0 012-2h6a2 2 0 012 2v2",stroke:"#647075",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,l.jsxs)("div",{className:"room-calendar__room-details",children:[(0,l.jsx)("div",{className:"room-calendar__room-name",children:e.name}),(0,l.jsx)("div",{className:"room-calendar__room-number",children:e.roomNumber})]}),p===e.id?(0,l.jsxs)(c.A,{className:"room-calendar__room-edit-actions",children:[(0,l.jsx)(d.Ay,{className:"room-calendar__room-save-btn",size:"small",type:"primary",onClick:()=>{var a;k[a=e.id]&&g(e=>({...e,[a]:k[a].slice()})),A(null)},children:"保存"}),(0,l.jsx)(d.Ay,{className:"room-calendar__room-cancel-btn",size:"small",onClick:()=>{var a;return a=e.id,void(A(null),M(e=>({...e,[a]:(b[a]||[]).slice()})))},children:"取消"})]}):(0,l.jsx)(d.Ay,{className:"room-calendar__room-edit-btn",size:"small",icon:(0,l.jsx)(j.A,{}),onClick:()=>{var a;A(a=e.id),M(e=>({...e,[a]:(b[a]||Array(L.length).fill(0)).slice()}))}})]}),(0,l.jsxs)("div",{className:"room-calendar__status-labels",children:[(0,l.jsx)("div",{className:"room-calendar__status-label",children:"可售"}),(0,l.jsx)("div",{className:"room-calendar__status-label",children:"已订"})]}),(0,l.jsx)("div",{className:"room-calendar__date-grid",ref:e=>{y.current[a]=e},children:L.map((a,r)=>{var s;return(0,l.jsxs)("div",{className:"room-calendar__grid-column",children:[(0,l.jsx)("div",{className:"room-calendar__grid-cell",children:p===e.id?(0,l.jsx)(i.A,{size:"small",value:(null==(s=k[e.id])?void 0:s[r])??0,onChange:a=>{var l;return l=e.id,void M(e=>{let s={...e},o=(s[l]||b[l]||Array(L.length).fill(0)).slice();return o[r]=a??0,s[l]=o,s})}}):b[e.id]&&void 0!==b[e.id][r]?String(b[e.id][r]):"-"}),(0,l.jsx)("div",{className:"room-calendar__grid-cell",children:"-"})]},`${e.id}-${a.date.format("YYYY-MM-DD")}`)})}),(0,l.jsx)("div",{className:"room-calendar__scrollbar-indicator"})]},e.id))})})]})}}}]);